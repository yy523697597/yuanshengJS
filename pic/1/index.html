<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>鼠标移入移出改变透明度</title>
    <style type="text/css">
        .demo1{ width:350px; text-align:left;
            margin:0 auto;}
    </style>
</head>
<body>
<div class="demo1">
    <img id="img" src="http://img13.360buyimg.com/n1/jfs/t253/339/684583987/309716/5da5fdcb/53ef8a13Ncc2614f0.jpg" alt=""/>
</div>
<script>
    (function(){
        var img = document.getElementById('img');
        img.onmouseover = function(){
            fade(this, 30);
        }
        img.onmouseout = function(){
            fade(this, 100);
        }

        function css(obj, attr){
            if(obj.currentStyle){
                return obj.currentStyle[attr];
            } else {
                return getComputedStyle(obj, false)[attr];
            }
        }
        function fade(obj, target){
            clearInterval(obj.timer);
            obj.timer = setInterval(function(){
                var alpha = 0;
                var cur = css(obj, 'opacity') * 100;
                alpha = (target - cur) / 8;
                alpha = alpha > 0 ? Math.ceil(alpha) : Math.floor(alpha);
                var stop = true;
                if(cur != target){
                    stop = false;
                }
                cur += alpha;
                obj.style.fitler = 'alpha(opacity=' + cur + ')';
                obj.style.opacity = cur / 100;
                if(stop){
                    clearInterval(obj.timer);
                    obj.timer = null;
                }
            }, 30);
        }
    }());
</script>
</body>
</html>